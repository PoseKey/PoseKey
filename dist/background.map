{"version":3,"sources":["background.js"],"names":["console","log","is","lastTab","lastWindow","secondImage","firstImage","pm","sc","fq","ac","defaults","customs","custom","load","loadS","save","chrome","storage","sync","set","power","sets","pmm","scm","fqm","acm","customm","defaultsm","customsm","get","data","browserAction","setIcon","path","tabs","onUpdated","addListener","onLoad","onCreated","onActivated","active","windows","onFocusChanged","window","runtime","onMessage","gotMessage","message","sender","sendResponse","msg","query","i","length","sendMessage","id","currentWindow","current","buttonClicked","tab","msg2","tabId","windowId","highlight"],"mappings":"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","file":"background.map","sourceRoot":"..","sourcesContent":["console.log('background running');\r\n\r\nlet is = null;\r\nlet lastTab;\r\nlet lastWindow;\r\n\r\nlet secondImage =\"standing-up-man-.png\";\r\nlet firstImage =\"man-celebrating1.png\";\r\n\r\n//setting values initialized by message from background\r\n//pm = posenet model\r\n//sc = image scale\r\n//fq = frequency\r\n//ac = accuracy\r\nlet pm, sc, fq, ac;\r\n\r\nlet defaults, customs, custom;\r\n\r\nload();\r\nloadS();\r\n//power\r\nfunction save(){\r\n    if(is==true)\r\n        chrome.storage.sync.set({\r\n            power: true,\r\n            sets:{\r\n                pmm: pm,\r\n                scm: sc,\r\n                fqm: fq,\r\n                acm: ac,\r\n                customm:custom, defaultsm:defaults, customsm:customs,\r\n            }\r\n        });\r\n    else\r\n        chrome.storage.sync.set({\r\n            power: false,\r\n            sets:{\r\n                pmm: pm,\r\n                scm: sc,\r\n                fqm: fq,\r\n                acm: ac,\r\n                customm:custom, defaultsm:defaults, customsm:customs,\r\n            }});\r\n}\r\nfunction load(){\r\n    chrome.storage.sync.get('power',function(data){\r\n        is = data.power;\r\n        console.log(data.power);\r\n        if(is)chrome.browserAction.setIcon({path: firstImage});\r\n        else chrome.browserAction.setIcon({path: secondImage});\r\n    });\r\n}\r\n\r\nfunction loadS(){\r\n    chrome.storage.sync.get('sets',function(data){\r\n        if(data.pm) pm = data.pm; else pm = 1;\r\n        if(data.sc) sc = data.sc; else sc = 0.4;\r\n        if(data.fq) fq = data.fq; else fq = 500;\r\n        if(data.ac) ac = data.ac; else ac = 70;\r\n        if(data.custom) custom = data.custom; else custom = false;\r\n        if(data.defaults) defaults = data.defaults; else defaults = [\"Scroll Up\",null,null,null,null,null];\r\n        if(data.customs) customs = data.customs; else customs = [null,null,null,null,null,null];\r\n    });\r\n}\r\n\r\n// chrome.browserAction.onClicked.addListener(buttonClicked);\r\nchrome.tabs.onUpdated.addListener(onLoad);\r\nchrome.tabs.onCreated.addListener(onLoad);\r\nchrome.tabs.onActivated.addListener(active);    //active는 하나밖에 없음\r\nchrome.windows.onFocusChanged.addListener(window);\r\nchrome.runtime.onMessage.addListener(gotMessage);\r\n// chrome.tabs.onHighlighted.addListener(highlight);\r\n\r\nfunction gotMessage(message, sender, sendResponse){\r\n    console.log(message);\r\n    if(message.data==\"trigger\"){\r\n        let msg = {\r\n            data: \"ON\", pmm:pm, scm:sc, fqm:fq, acm:ac, customm:custom, defaultsm:defaults, customsm:customs,\r\n        };\r\n        if(is===true){\r\n            msg.data = \"OFF\";\r\n            is = false;\r\n            chrome.browserAction.setIcon({path: secondImage});\r\n            /* 모든 탭에 OFF하라고 보냄*/\r\n            chrome.tabs.query({}, function(tabs) {\r\n                for (let i=0; i<tabs.length; i++) {\r\n                    chrome.tabs.sendMessage(tabs[i].id, msg);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            is = true;\r\n            chrome.browserAction.setIcon({path: firstImage});\r\n            chrome.tabs.query({active:true,currentWindow: true},function(tabs){\r\n                var current = tabs[0].id;\r\n                chrome.tabs.sendMessage(current, msg);\r\n            });   // 현재 탭에만 ON하라고 보냄\r\n        }\r\n    }\r\n    else if(message.data == \"?\"){\r\n        console.log(\"?\");\r\n    }\r\n    else if(message.data ==\"ON\"){\r\n        is = true;\r\n        chrome.browserAction.setIcon({path: firstImage});\r\n        chrome.tabs.query({active:true,currentWindow: true},function(tabs){\r\n            var current = tabs[0].id;\r\n            chrome.tabs.sendMessage(current, msg);\r\n        });\r\n    }\r\n    else if(message.data ==\"OFF\"){\r\n        is = false;\r\n        chrome.browserAction.setIcon({path: secondImage});\r\n        /* 모든 탭에 OFF하라고 보냄*/\r\n        chrome.tabs.query({}, function(tabs) {\r\n            for (let i=0; i<tabs.length; i++) {\r\n                chrome.tabs.sendMessage(tabs[i].id, msg);\r\n            }\r\n        });\r\n    }\r\n    else if(message.data == \"setting\"){\r\n        pm = message.pmm;\r\n        sc = message.scm;\r\n        fq = message.fqm;\r\n        ac = message.acm;\r\n    }\r\n    else if(message.data == \"poses\"){\r\n        custom = message.customm;\r\n        defaults = message.defaultsm;\r\n        customs = message.customsm;\r\n    }\r\n    save();\r\n    sendResponse({data:is, pmm:pm, scm:sc, fqm:fq, acm:ac, customm:custom, defaultsm:defaults, customsm:customs });\r\n}\r\nfunction buttonClicked(tab) {\r\n    console.log(\"button clicked!\");\r\n    console.log(tab);\r\n    let msg = {\r\n        data: \"ON\", pmm:pm, scm:sc, fqm:fq, acm:ac, customm:custom, defaultsm:defaults, customsm:customs,\r\n    };\r\n    if(is===true){\r\n        msg.data = \"OFF\";\r\n        is = false;\r\n        chrome.browserAction.setIcon({path: secondImage});\r\n        /* 모든 탭에 OFF하라고 보냄*/\r\n        chrome.tabs.query({}, function(tabs) {\r\n            for (let i=0; i<tabs.length; i++) {\r\n                chrome.tabs.sendMessage(tabs[i].id, msg);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        is = true;\r\n        chrome.browserAction.setIcon({path: firstImage});\r\n        chrome.tabs.sendMessage(tab.id, msg);   // 현재 탭에만 ON하라고 보냄\r\n    }\r\n    save();\r\n}\r\n\r\nfunction onLoad(id){\r\n    console.log(\"onLoad!\");\r\n    // console.log(id);\r\n    let msg = {\r\n        data: \"ON\", pmm:pm, scm:sc, fqm:fq, acm:ac, customm:custom, defaultsm:defaults, customsm:customs,\r\n    };\r\n    if (is == false) {\r\n        msg.data = \"OFF\";\r\n    }\r\n    save();\r\n    chrome.tabs.sendMessage(id, msg);\r\n}\r\n\r\nfunction active(tab){\r\n    // console.log(\"tab changed!\");\r\n    // console.log(tab.tabId);\r\n    let msg={\r\n        data: \"ON\", pmm:pm, scm:sc, fqm:fq, acm:ac, customm:custom, defaultsm:defaults, customsm:customs,\r\n    }\r\n    let msg2={\r\n        data: \"OFF\", pmm:pm, scm:sc, fqm:fq, acm:ac, customm:custom, defaultsm:defaults, customsm:customs,\r\n    }\r\n    if (is === false){\r\n        msg.data = \"OFF\";\r\n    }\r\n    chrome.tabs.query({active:false}, function(tabs) {\r\n        for (let i=0; i<tabs.length; i++) {\r\n            chrome.tabs.sendMessage(tabs[i].id, msg2);\r\n        }\r\n    });\r\n    chrome.tabs.sendMessage(tab.tabId, msg);\r\n    save();\r\n    // if(lastTab){\r\n    //     chrome.tabs.sendMessage(lastTab, msg2);\r\n    // }\r\n    // lastTab = tab.tabId;\r\n}\r\n\r\nfunction window(windowId){\r\n    let msg={\r\n        data: \"ON\", pmm:pm, scm:sc, fqm:fq, acm:ac, customm:custom, defaultsm:defaults, customsm:customs,\r\n    }\r\n    let msg2={\r\n        data: \"OFF\", pmm:pm, scm:sc, fqm:fq, acm:ac, customm:custom, defaultsm:defaults, customsm:customs,\r\n    }\r\n    if (is === false){\r\n        msg.data = \"OFF\";\r\n    }\r\n    chrome.tabs.query({active:false}, function(tabs) {\r\n        for (let i=0; i<tabs.length; i++) {\r\n            chrome.tabs.sendMessage(tabs[i].id, msg2);\r\n        }\r\n    });\r\n\r\n    // console.log(\"window changed!\");\r\n    chrome.tabs.query({active:true,currentWindow: true},function(tabs){\r\n        var current = tabs[0].id;\r\n        // console.log(windowId + \", \" + current);\r\n        chrome.tabs.sendMessage(current, msg);\r\n        // chrome.tabs.sendMessage(lastTab, msg2);\r\n        lastTab = current;\r\n        // lastWindow=windowId;\r\n    });\r\n    // if(lastWindow!=windowId){\r\n    //     chrome.tabs.sendMessage(lastTab, msg2);\r\n    // }\r\n    save();\r\n}\r\n\r\nfunction highlight(tab){\r\n    // console.log(\"highlight!\");\r\n}\r\n"]}
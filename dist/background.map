{"version":3,"sources":["background.js"],"names":["console","log","is","lastTab","chrome","browserAction","onClicked","addListener","buttonClicked","tabs","onUpdated","onLoad","onCreated","onActivated","active","tab","msg","data","setIcon","path","sendMessage","id","msg2","tabId"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,QAAQC,GAAR,CAAY,oBAAZ;;AAEA,IAAIC,KAAK,IAAT;AACA,IAAIC,OAAJ;AACAC,OAAOC,aAAP,CAAqBC,SAArB,CAA+BC,WAA/B,CAA2CC,aAA3C;AACAJ,OAAOK,IAAP,CAAYC,SAAZ,CAAsBH,WAAtB,CAAkCI,MAAlC;AACAP,OAAOK,IAAP,CAAYG,SAAZ,CAAsBL,WAAtB,CAAkCI,MAAlC;AACAP,OAAOK,IAAP,CAAYI,WAAZ,CAAwBN,WAAxB,CAAoCO,MAApC,GAAgD;;AAEhD,SAASN,aAAT,CAAuBO,GAAvB,EAA4B;AACxBf,YAAQC,GAAR,CAAY,iBAAZ;AACA;AACA,QAAIe,MAAM;AACNC,cAAM;AADA,KAAV;AAGA,QAAGf,OAAK,IAAR,EAAa;AACTc,YAAIC,IAAJ,GAAW,KAAX;AACAf,aAAK,KAAL;AACAE,eAAOC,aAAP,CAAqBa,OAArB,CAA6B,EAACC,MAAM,WAAP,EAA7B;AACH,KAJD,MAKK;AACDjB,aAAK,IAAL;AACAE,eAAOC,aAAP,CAAqBa,OAArB,CAA6B,EAACC,MAAM,WAAP,EAA7B;AACH;AACDf,WAAOK,IAAP,CAAYW,WAAZ,CAAwBL,IAAIM,EAA5B,EAAgCL,GAAhC;AACH;;AAED,SAASL,MAAT,CAAgBU,EAAhB,EAAmB;AACfrB,YAAQC,GAAR,CAAY,SAAZ;AACA;AACA,QAAIe,GAAJ;AACA,QAAId,OAAO,IAAX,EAAgB;AACZc,cAAM;AACFC,kBAAM;AADJ,SAAN;AAGH,KAJD,MAKK;AACDD,cAAM;AACFC,kBAAM;AADJ,SAAN;AAGH;AACDb,WAAOK,IAAP,CAAYW,WAAZ,CAAwBC,EAAxB,EAA4BL,GAA5B;AACH;;AAED,SAASF,MAAT,CAAgBC,GAAhB,EAAoB;AAChBf,YAAQC,GAAR,CAAY,SAAZ;AACA;AACA,QAAIe,MAAI;AACJC,cAAM;AADF,KAAR;AAGA,QAAIK,OAAK;AACLL,cAAM;AADD,KAAT;AAGA,QAAIf,OAAO,KAAX,EAAiB;AACbc,YAAIC,IAAJ,GAAW,KAAX;AACH;AACDb,WAAOK,IAAP,CAAYW,WAAZ,CAAwBL,IAAIQ,KAA5B,EAAmCP,GAAnC;AACA,QAAGb,OAAH,EAAW;AACPC,eAAOK,IAAP,CAAYW,WAAZ,CAAwBjB,OAAxB,EAAiCmB,IAAjC;AACH;AACDnB,cAAUY,IAAIQ,KAAd;AACH","file":"background.map","sourceRoot":"..","sourcesContent":["console.log('background running');\r\n\r\nlet is = true;\r\nlet lastTab;\r\nchrome.browserAction.onClicked.addListener(buttonClicked);\r\nchrome.tabs.onUpdated.addListener(onLoad);\r\nchrome.tabs.onCreated.addListener(onLoad);\r\nchrome.tabs.onActivated.addListener(active);    //active는 하나밖에 없음\r\n\r\nfunction buttonClicked(tab) {\r\n    console.log(\"button clicked!\");\r\n    // console.log(tab);\r\n    let msg = {\r\n        data: \"ON\"\r\n    };\r\n    if(is===true){\r\n        msg.data = \"OFF\";\r\n        is = false;\r\n        chrome.browserAction.setIcon({path: \"likeR.png\"});\r\n    }\r\n    else {\r\n        is = true;\r\n        chrome.browserAction.setIcon({path: \"likeG.png\"});\r\n    }\r\n    chrome.tabs.sendMessage(tab.id, msg);\r\n}\r\n\r\nfunction onLoad(id){\r\n    console.log(\"onLoad!\");\r\n    // console.log(id);\r\n    let msg \r\n    if (is === true){\r\n        msg = {\r\n            data: \"ON\"\r\n        };\r\n    }\r\n    else {\r\n        msg = {\r\n            data: \"OFF\"\r\n        };\r\n    }\r\n    chrome.tabs.sendMessage(id, msg);\r\n}\r\n\r\nfunction active(tab){\r\n    console.log(\"onLoad!\");\r\n    // console.log(tab);\r\n    let msg={\r\n        data: \"ON\"\r\n    }\r\n    let msg2={\r\n        data: \"OFF\"\r\n    }\r\n    if (is === false){\r\n        msg.data = \"OFF\";\r\n    }\r\n    chrome.tabs.sendMessage(tab.tabId, msg);\r\n    if(lastTab){\r\n        chrome.tabs.sendMessage(lastTab, msg2);\r\n    }\r\n    lastTab = tab.tabId;\r\n}"]}